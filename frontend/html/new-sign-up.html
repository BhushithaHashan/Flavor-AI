<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FlavorAI - Sign In / Sign Up</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    * { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
    :root { --primary:#FF6B6B; --secondary:#4ECDC4; --accent:#FFE66D; --dark:#1A1A2E; --light:#F7F7F7; --gray:#8A8A8A; --transition: all 0.3s ease;}
    body { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); min-height:100vh; display:flex; justify-content:center; align-items:center; padding:20px;}
    .container { width:100%; max-width:400px; background:white; border-radius:20px; box-shadow:0 15px 35px rgba(0,0,0,0.1); overflow:hidden; transition:var(--transition);}
    .container:hover { transform:translateY(-5px); box-shadow:0 20px 40px rgba(0,0,0,0.15);}
    .header { background:var(--primary); padding:30px 20px; text-align:center; color:white;}
    .header h1 { font-size:28px; margin-bottom:10px; font-weight:700;}
    .header p { font-size:14px; opacity:0.9;}
    .logo { font-size:40px; margin-bottom:15px; color:white;}
    .form-container { padding:30px;}
    .form-group { margin-bottom:20px; position:relative;}
    .form-group label { display:block; margin-bottom:8px; font-weight:500; color:var(--dark); font-size:14px;}
    .input-with-icon { position:relative;}
    .input-with-icon i { position:absolute; left:15px; top:50%; transform:translateY(-50%); color:var(--gray);}
    .input-with-icon input { width:100%; padding:15px 15px 15px 45px; border:2px solid #eaeaea; border-radius:10px; font-size:16px; transition:var(--transition);}
    .input-with-icon input:focus { border-color:var(--secondary); outline:none; box-shadow:0 0 0 3px rgba(78,205,196,0.2);}
    .options { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; font-size:14px;}
    .remember-me { display:flex; align-items:center;}
    .remember-me input { margin-right:8px;}
    .forgot-password { color:var(--primary); text-decoration:none; font-weight:500; transition:var(--transition);}
    .forgot-password:hover { text-decoration:underline;}
    .btn { width:100%; padding:15px; border:none; border-radius:10px; background:var(--primary); color:white; font-size:16px; font-weight:600; cursor:pointer; transition:var(--transition); text-transform:uppercase; letter-spacing:1px;}
    .btn:hover { background:#ff5252; transform:translateY(-2px);}
    .divider { text-align:center; margin:25px 0; position:relative;}
    .divider:before { content:""; position:absolute; left:0; top:50%; width:100%; height:1px; background:#eaeaea;}
    .divider span { background:white; padding:0 15px; color:var(--gray); font-size:14px; position:relative;}
    .social-login { display:flex; justify-content:center; gap:15px; margin-bottom:25px;}
    .social-btn { width:50px; height:50px; border-radius:50%; display:flex; justify-content:center; align-items:center; background:#f5f5f5; color:var(--dark); font-size:18px; transition:var(--transition); cursor:pointer;}
    .social-btn:hover { transform:translateY(-3px); box-shadow:0 5px 15px rgba(0,0,0,0.1);}
    .facebook:hover { background:#3b5998; color:white;}
    .google:hover { background:#dd4b39; color:white;}
    .twitter:hover { background:#1da1f2; color:white;}
    .switch-form { text-align:center; margin-top:20px; font-size:14px; color:var(--gray);}
    .switch-form a { color:var(--primary); text-decoration:none; font-weight:500; transition:var(--transition);}
    .switch-form a:hover { text-decoration:underline;}
    .signup-container { display:none;}
    .password-toggle { position:absolute; right:15px; top:50%; transform:translateY(-50%); cursor:pointer; color:var(--gray);}
    @media (max-width:480px) {.container {border-radius:15px;} .form-container {padding:20px;} .header {padding:20px 15px;} .options {flex-direction:column; align-items:flex-start; gap:10px;} .forgot-password {margin-left:auto;}}
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <div class="logo"><i class="fas fa-utensils"></i></div>
        <h1>FlavorAI</h1>
        <p>Your AI-powered recipe generator</p>
    </div>

    <div class="form-container">
        <!-- Sign In Form -->
        <div id="signin-container">
            <form id="signin-form">
                <div class="form-group">
                    <label for="signin-email">Email</label>
                    <div class="input-with-icon">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="signin-email" placeholder="Enter your email" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="signin-password">Password</label>
                    <div class="input-with-icon">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="signin-password" placeholder="Enter your password" required>
                        <span class="password-toggle" id="signin-toggle"><i class="fas fa-eye"></i></span>
                    </div>
                </div>
                <div class="options">
                    <div class="remember-me">
                        <input type="checkbox" id="remember-me">
                        <label for="remember-me">Remember me</label>
                    </div>
                    <a href="#" class="forgot-password">Forgot Password?</a>
                </div>
                <button type="submit" class="btn">Sign In</button>
            </form>

            <div class="divider"><span>Or continue with</span></div>
            <div class="social-login">
                <div class="social-btn google"><i class="fab fa-google"></i></div>
                <div class="social-btn facebook"><i class="fab fa-facebook-f"></i></div>
                <div class="social-btn twitter"><i class="fab fa-twitter"></i></div>
            </div>
            <div class="switch-form">
                <p>Don't have an account? <a href="#" id="switch-to-signup">Sign Up</a></p>
            </div>
        </div>

        <!-- Sign Up Form -->
        <div id="signup-container" class="signup-container">
            <form id="signup-form">
                <div class="form-group">
                    <label for="signup-username">Username</label>
                    <div class="input-with-icon">
                        <i class="fas fa-user"></i>
                        <input type="text" id="signup-username" placeholder="Enter your username" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="signup-email">Email</label>
                    <div class="input-with-icon">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="signup-email" placeholder="Enter your email" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <div class="input-with-icon">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="signup-password" placeholder="Create a password" required>
                        <span class="password-toggle" id="signup-toggle"><i class="fas fa-eye"></i></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="signup-confirm">Confirm Password</label>
                    <div class="input-with-icon">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="signup-confirm" placeholder="Confirm your password" required>
                    </div>
                </div>
                <button type="submit" class="btn">Sign Up</button>
            </form>

            <div class="divider"><span>Or sign up with</span></div>
            <div class="social-login">
                <div class="social-btn google"><i class="fab fa-google"></i></div>
                <div class="social-btn facebook"><i class="fab fa-facebook-f"></i></div>
                <div class="social-btn twitter"><i class="fab fa-twitter"></i></div>
            </div>
            <div class="switch-form">
                <p>Already have an account? <a href="#" id="switch-to-signin">Sign In</a></p>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const switchToSignup = document.getElementById('switch-to-signup');
    const switchToSignin = document.getElementById('switch-to-signin');
    const signinContainer = document.getElementById('signin-container');
    const signupContainer = document.getElementById('signup-container');

    switchToSignup.addEventListener('click', e => { e.preventDefault(); signinContainer.style.display='none'; signupContainer.style.display='block';});
    switchToSignin.addEventListener('click', e => { e.preventDefault(); signupContainer.style.display='none'; signinContainer.style.display='block';});

    const setupPasswordToggle = (toggleElement, passwordField) => {
        toggleElement.addEventListener('click', function() {
            const type = passwordField.getAttribute('type')==='password'?'text':'password';
            passwordField.setAttribute('type', type);
            const eyeIcon = this.querySelector('i');
            eyeIcon.classList.toggle('fa-eye');
            eyeIcon.classList.toggle('fa-eye-slash');
        });
    };

    setupPasswordToggle(document.getElementById('signin-toggle'), document.getElementById('signin-password'));
    setupPasswordToggle(document.getElementById('signup-toggle'), document.getElementById('signup-password'));

    const signinForm = document.getElementById('signin-form');
    const signupForm = document.getElementById('signup-form');

    // SIGN IN
    signinForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        const email = document.getElementById('signin-email').value;
        const password = document.getElementById('signin-password').value;

        try {
            const response = await fetch('http://localhost:8080/api/auth/login', {
                method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({ email, password })
            });

            if(!response.ok) {
                const errData = await response.json();
                alert('Login failed: ' + (errData.message||response.statusText));
                return;
            }

            const data = await response.json();
            const token = data.token;
            localStorage.setItem('jwtToken', token);

            // alert('Sign in successful! Redirecting...');
            window.location.href='index.html';

        } catch(err) { console.error(err); alert('Error during login.'); }
    });

    // SIGN UP
    signupForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        const username = document.getElementById('signup-username').value;
        const email = document.getElementById('signup-email').value;
        const password = document.getElementById('signup-password').value;
        const confirmPassword = document.getElementById('signup-confirm').value;

        if(password !== confirmPassword){ alert('Passwords do not match!'); return; }

        try {
            const response = await fetch('http://localhost:8080/api/auth/register', {
                method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({ username, email, password })
            });

            if(!response.ok){
                const errData = await response.json();
                alert('Registration failed: ' + (errData.message||response.statusText));
                return;
            }

            // alert('Registration successful! You can now sign in.');
            window.location.href='index.html';
            //signupContainer.style.display='none';
            //signinContainer.style.display='block';

        } catch(err){ console.error(err); alert('Error during registration.'); }
    });
});
</script>
</body>
</html>
